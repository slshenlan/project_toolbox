System.register(["./index-legacy-DQbE9N6t.js","./index-legacy-Dh74zTvE.js","./index-legacy-DkpWKVSY.js","./vue-legacy-Cowg1EAB.js","./index-legacy-Bv6ZWA-v.js","./index-legacy-Bc6SGh-3.js","./index-legacy-BylB44n2.js","./index-legacy-QoV3-9G-.js","./index-legacy-iHhCpWMU.js","./index-legacy-Ax_errcB.js","./arco-legacy-DmTh9LTc.js","./FileSaver-legacy-Dzp4YQoW.js","./loading-legacy-yZ4ZQ7kx.js","./index-legacy-kUEiIK1y.js","./pub-legacy-CbZ7AZiy.js"],(function(e,t){"use strict";var r,a,l,i,o,n,s,c,d,u,p,f,b,m,g,h,x,v,y,k,w,z,_,S,I,V,j,Y,A,C,O,U,P,X,L,M,R,$,B,E,F,T,D,N,q,W;return{setters:[function(e){r=e.default},function(e){a=e.I,l=e.b,i=e.c,o=e.e,n=e.f,s=e.g,c=e.u,d=e._},null,function(e){u=e.r,p=e.c,f=e.e,b=e.h,m=e.q,g=e.l,h=e.Y,x=e.s,v=e.w,y=e.C,k=e.y,w=e.m,z=e.v,_=e.K,S=e.L,I=e.j,V=e.O,j=e.N,Y=e.F,A=e.z,C=e.o},function(e){O=e.S},null,null,null,null,null,function(e){U=e.I,P=e.a,X=e.b,L=e.c,M=e.d,R=e.D,$=e.F,B=e.O,E=e.t,F=e.w,T=e.r,D=e.B},function(e){N=e.J,q=e.s},function(e){W=e.s},null,null],execute:function(){var t=document.createElement("style");t.textContent='.arco-slider{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;width:100%}.arco-slider-vertical{display:inline-block;width:auto;min-width:22px;height:auto}.arco-slider-vertical .arco-slider-wrapper{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}.arco-slider-with-marks{margin-bottom:24px;padding:20px}.arco-slider-vertical.arco-slider-with-marks{margin-bottom:0;padding:0}.arco-slider-track{position:relative;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;width:100%;height:12px;cursor:pointer}.arco-slider-track:before{position:absolute;top:50%;display:block;width:100%;height:2px;background-color:var(--color-fill-3);-webkit-border-radius:2px;border-radius:2px;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%);content:""}.arco-slider-track.arco-slider-track-vertical{width:12px;max-width:12px;height:100%;min-height:200px;margin-right:0;margin-bottom:6px;margin-top:6px;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)}.arco-slider-track.arco-slider-track-vertical:before{top:unset;left:50%;width:2px;height:100%;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%)}.arco-slider-track.arco-slider-track-disabled:before{background-color:var(--color-fill-2)}.arco-slider-track.arco-slider-track-disabled .arco-slider-bar{background-color:var(--color-fill-3)}.arco-slider-track.arco-slider-track-disabled .arco-slider-btn{cursor:not-allowed}.arco-slider-track.arco-slider-track-disabled .arco-slider-btn:after{border-color:var(--color-fill-3)}.arco-slider-track.arco-slider-track-disabled .arco-slider-dots .arco-slider-dot{border-color:var(--color-fill-2)}.arco-slider-track.arco-slider-track-disabled .arco-slider-dots .arco-slider-dot-active{border-color:var(--color-fill-3)}.arco-slider-track.arco-slider-track-disabled .arco-slider-ticks .arco-slider-tick{background:var(--color-fill-2)}.arco-slider-track.arco-slider-track-disabled .arco-slider-ticks .arco-slider-tick-active{background:var(--color-fill-3)}.arco-slider-bar{position:absolute;top:50%;height:2px;background-color:rgb(var(--primary-6));-webkit-border-radius:2px;border-radius:2px;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.arco-slider-track-vertical .arco-slider-bar{top:unset;left:50%;width:2px;height:unset;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%)}.arco-slider-btn{position:absolute;top:0;left:0;width:12px;height:12px;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%)}.arco-slider-btn:after{position:absolute;top:0;left:0;display:inline-block;-webkit-box-sizing:border-box;box-sizing:border-box;width:12px;height:12px;background:var(--color-bg-2);border:2px solid rgb(var(--primary-6));-webkit-border-radius:50%;border-radius:50%;-webkit-transition:all .3s cubic-bezier(.3,1.3,.3,1);transition:all .3s cubic-bezier(.3,1.3,.3,1);content:""}.arco-slider-btn.arco-slider-btn-active:after,.arco-slider-btn:hover:after{-webkit-box-shadow:0 2px 5px rgba(0,0,0,.1);box-shadow:0 2px 5px rgba(0,0,0,.1);-webkit-transform:scale(1.16666667);-ms-transform:scale(1.16666667);transform:scale(1.16666667)}.arco-slider-track-vertical .arco-slider-btn{top:unset;bottom:0;left:0;-webkit-transform:translateY(50%);-ms-transform:translateY(50%);transform:translateY(50%)}.arco-slider-marks{position:absolute;top:12px;width:100%}.arco-slider-marks .arco-slider-mark{position:absolute;color:var(--color-text-3);font-size:14px;line-height:1;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%);cursor:pointer}.arco-slider-track-vertical .arco-slider-marks{top:0;left:15px;height:100%}.arco-slider-track-vertical .arco-slider-marks .arco-slider-mark{-webkit-transform:translateY(50%);-ms-transform:translateY(50%);transform:translateY(50%)}.arco-slider-dots{height:100%}.arco-slider-dots .arco-slider-dot-wrapper{position:absolute;top:50%;font-size:12px;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.arco-slider-track-vertical .arco-slider-dots .arco-slider-dot-wrapper{top:unset;left:50%;-webkit-transform:translate(-50%,50%);-ms-transform:translate(-50%,50%);transform:translate(-50%,50%)}.arco-slider-dots .arco-slider-dot-wrapper .arco-slider-dot{-webkit-box-sizing:border-box;box-sizing:border-box;width:8px;height:8px;background-color:var(--color-bg-2);border:2px solid var(--color-fill-3);-webkit-border-radius:50%;border-radius:50%}.arco-slider-dots .arco-slider-dot-wrapper .arco-slider-dot-active{border-color:rgb(var(--primary-6))}.arco-slider-ticks .arco-slider-tick{position:absolute;top:50%;width:1px;height:3px;margin-top:-1px;background:var(--color-fill-3);-webkit-transform:translate(-50%,-100%);-ms-transform:translate(-50%,-100%);transform:translate(-50%,-100%)}.arco-slider-ticks .arco-slider-tick-active{background:rgb(var(--primary-6))}.arco-slider-vertical .arco-slider-ticks .arco-slider-tick{top:unset;left:50%;width:3px;height:1px;margin-top:unset;-webkit-transform:translate(1px,50%);-ms-transform:translate(1px,50%);transform:translate(1px,50%)}.arco-slider-input{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;margin-left:20px}.arco-slider-vertical .arco-slider-input{margin-left:0}.arco-slider-input>.arco-input-number{width:60px;height:32px;overflow:visible;line-height:normal}.arco-slider-input>.arco-input-number input{text-align:center}.arco-slider-input-hyphens{margin:0 6px;width:8px;height:2px;background:rgb(var(--gray-6))}.water-mark-img[data-v-e754056b]{max-width:200px;width:200px;background:rgba(0,0,0,.2)}.option-btn[data-v-053bb57d]{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.option-btn button[data-v-053bb57d]{margin-left:10px}.img-list-body[data-v-053bb57d]{height:100%;overflow:hidden;position:relative}.img-list-body .img-tip[data-v-053bb57d]{position:relative;z-index:10;color:#165dff;text-align:center;border:1px dashed #dcdee2}.img-list-body .img-list[data-v-053bb57d]{position:absolute;z-index:9;top:0;left:0;right:0;bottom:0}.img-list-body .img-list>div[data-v-053bb57d]{overflow:auto;height:100%}.img-list-body .img-list>div .img-item[data-v-053bb57d]{margin-bottom:20px;border:1px solid #efefef}\n',document.head.appendChild(t);var J=f({__name:"index",props:{type:{type:String,default:""},size:{type:Number,default:20}},setup:function(e){var t=e,r=p((function(){return{fontSize:t.size}}));return function(e,c){return"home"===t.type?(b(),m(h(a),{key:0,style:g(h(r))},null,8,["style"])):"palette"===t.type?(b(),m(h(l),{key:1,style:g(h(r))},null,8,["style"])):"calendar"===t.type?(b(),m(h(U),{key:2,style:g(h(r))},null,8,["style"])):"link"===t.type?(b(),m(h(P),{key:3,style:g(h(r))},null,8,["style"])):"code"===t.type?(b(),m(h(i),{key:4,style:g(h(r))},null,8,["style"])):"image"===t.type?(b(),m(h(o),{key:5,style:g(h(r))},null,8,["style"])):"file-image"===t.type?(b(),m(h(X),{key:6,style:g(h(r))},null,8,["style"])):"swap"===t.type?(b(),m(h(n),{key:7,style:g(h(r))},null,8,["style"])):"upload"===t.type?(b(),m(h(L),{key:8,style:g(h(r))},null,8,["style"])):"edit"===t.type?(b(),m(h(M),{key:9,style:g(h(r))},null,8,["style"])):"tool"===t.type?(b(),m(h(s),{key:10,style:g(h(r))},null,8,["style"])):x("",!0)}}}),K={style:{width:"30px",height:"30px","line-height":"35px"}},G=f({__name:"index",emits:["onSet"],setup:function(e,t){var r=t.expose,a=t.emit,l=c().$pub,i=function(){var e=u(!1),t=u({type:10,iconSize:50,globalAlpha:100,portraitSpacing:20,horizontalSpacing:20,rotateAngle:0,icon:void 0}),r=p((function(){var e=t.value,r=e.iconSize,a=e.icon,l={width:r,height:r};if(!a)return!1;if(a.width>a.height){var i=a.width/a.height;l.height=l.width/i}else{var o=a.height/a.width;l.width=l.height/o}return l}));return{visible:e,formList:{location:[{value:10,label:"铺满"},{value:1,label:"左上"},{value:2,label:"左中"},{value:3,label:"左下"},{value:4,label:"右上"},{value:5,label:"右中"},{value:6,label:"右下"},{value:7,label:"中上"},{value:8,label:"中间"},{value:9,label:"中下"}]},form:t,iconSize:r}}(),o=i.visible,n=i.formList,s=i.form,d=i.iconSize,f=u(null),g=a,x=l.slBaseDebounce((function(){g("onSet",{iconSize:d.value,form:s.value})}));function A(e){var t=e.img;s.value.icon=t,f.value&&(f.value.src=t.src)}return v(s.value,(function(){x()})),r({show:function(){o.value=!0},getIconSize:function(){return d.value},getForm:function(){return s.value}}),function(e,t){var r=$,a=B,l=E,i=F,c=T,d=R;return b(),m(d,{class:"image-tool-water-mask-drawer",width:380,visible:h(o),footer:!1,onCancel:t[6]||(t[6]=function(e){return o.value=!h(o)})},{title:y((function(){return t[7]||(t[7]=[k(" 属性栏 ")])})),default:y((function(){return[w("div",null,[z(c,{model:h(s)},{default:y((function(){return[z(r,{label:"水印图片"},{default:y((function(){return[w("div",null,[z(O,{multiple:!1,onOnToImage:A},{default:y((function(){return[w("div",K,[z(J,{type:"image"})])]})),_:1}),w("p",null,[_(w("img",{ref_key:"iconPrev",ref:f,class:"water-mark-img"},null,512),[[S,h(s).icon]])])])]})),_:1}),z(r,{label:"位置"},{default:y((function(){return[z(l,{modelValue:h(s).type,"onUpdate:modelValue":t[0]||(t[0]=function(e){return h(s).type=e}),style:{width:"200px"},placeholder:"Please select ..."},{default:y((function(){return[(b(!0),I(Y,null,V(h(n).location,(function(e,t){return b(),m(a,{key:t,value:e.value},{default:y((function(){return[k(j(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),z(r,{label:"水印大小"},{default:y((function(){return[z(i,{modelValue:h(s).iconSize,"onUpdate:modelValue":t[1]||(t[1]=function(e){return h(s).iconSize=e}),max:500,min:20,step:5},null,8,["modelValue"])]})),_:1}),z(r,{label:"透明度"},{default:y((function(){return[z(i,{modelValue:h(s).globalAlpha,"onUpdate:modelValue":t[2]||(t[2]=function(e){return h(s).globalAlpha=e}),max:100,min:10},null,8,["modelValue"])]})),_:1}),z(r,{label:"上下间距"},{default:y((function(){return[z(i,{modelValue:h(s).horizontalSpacing,"onUpdate:modelValue":t[3]||(t[3]=function(e){return h(s).horizontalSpacing=e}),max:500,min:0},null,8,["modelValue"])]})),_:1}),z(r,{label:"左右间距"},{default:y((function(){return[z(i,{modelValue:h(s).portraitSpacing,"onUpdate:modelValue":t[4]||(t[4]=function(e){return h(s).portraitSpacing=e}),max:500,min:0},null,8,["modelValue"])]})),_:1}),z(r,{label:"旋转角度"},{default:y((function(){return[z(i,{modelValue:h(s).rotateAngle,"onUpdate:modelValue":t[5]||(t[5]=function(e){return h(s).rotateAngle=e}),max:180,min:-180,step:5},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])])]})),_:1},8,["visible"])}}}),H=d(G,[["__scopeId","data-v-e754056b"]]);function Q(){var e=c(),t=e.$pub,r=e.proxy,a=u([]),l=u({}),i=u({});function o(e,a){A((function(){var o="refCanvas".concat(e);t.slBasePolling((function(){var e=r.$refs[o];return e&&e.length>0})).then((function(){var e=r.$refs[o][0],t=a.width,n=a.height,s=e.getContext("2d");s&&(s.clearRect(0,0,t,n),s.globalAlpha=1,s.drawImage(a.img,0,0,t,n),function(e,t){var r=l.value,a=r.icon,o=r.globalAlpha,n=r.rotateAngle;if(a){var s=i.value,c=s.height,d=s.width,u=function(e){var t=l.value,r=t.type,a=t.portraitSpacing,o=t.horizontalSpacing,n=i.value,s=n.height,c=n.width,d=[],u=void 0,p=e.width,f=e.height;switch(r){case 1:u={x:0,y:0},d.push({x:a,y:o});break;case 2:u={x:0,y:f/2},d.push({x:a,y:o-s/2});break;case 3:u={x:0,y:f},d.push({x:a,y:-1*(o+s)});break;case 4:u={x:p,y:0},d.push({x:-1*(a+c),y:o});break;case 5:u={x:p,y:f/2},d.push({x:-1*(a+c),y:o-s/2});break;case 6:u={x:p,y:f},d.push({x:-1*(a+c),y:-1*(o+s)});break;case 7:u={x:p/2,y:0},d.push({x:a-c/2,y:o});break;case 8:u={x:p/2,y:f/2},d.push({x:a-c/2,y:o-s/2});break;case 9:u={x:p/2,y:f},d.push({x:a-c/2,y:-1*(o+s)});break;case 10:u={x:p/2,y:f/2};for(var b=c+a,m=s+o,g=Math.sqrt(Math.pow(p,2)+Math.pow(f,2))/2,h=-1*g;h<g;){for(var x=-1*g;x<g;)d.push({x:x,y:h}),x+=b;h+=m}}return{points:d,center:u}}(t);if(u&&u.center){e.globalAlpha=o/100,e.translate(u.center.x,u.center.y),e.rotate(Math.PI/180*n);for(var p=0;p<u.points.length;p++){var f=u.points[p];e.drawImage(a,f.x,f.y,d,c)}e.rotate(Math.PI/180*n*-1),e.translate(-1*u.center.x,-1*u.center.y)}}}(s,a))}))}))}return{imgList:a,maskProp:l,iconSize:i,setWatermask:function(e){i.value=e.iconSize,l.value=e.form,a.value.length&&l.value&&l.value.icon&&a.value.forEach((function(e,t){o(t,e)}))},handleBeforeUpload:function(e){a.value.push(e),A((function(){o(a.value.length-1,e)}))},watermaskRenderImg:o}}var Z={class:"sl-layout-content"},ee={class:"option-btn"},te={class:"img-list-body"},re={class:"img-tip"},ae={style:{padding:"80px 0"}},le={class:"img-list"},ie=["width","height"],oe=f({__name:"index",setup:function(e){var t=c().proxy,a=function(){var e=c(),t=e.$SlMessage,r=e.proxy;return{dowmloadRenderExportImage:function(e){if(e.length<1)t.warning("请选择需要添加水印的图片");else{W.show();var a=new N,l=a.folder("images");e.forEach((function(t,i){var o="refCanvas".concat(i);if(r){var n=r.$refs[o][0];l&&(l.file(t.fileName,n.toDataURL("image/jpeg",1).substring(22),{base64:!0}),i===e.length-1&&(W.hide(),a.generateAsync({type:"blob"}).then((function(e){q(e,"watermask.zip")}))))}}))}}}}(),l=a.dowmloadRenderExportImage,i=Q(),o=i.imgList,n=i.maskProp,s=i.iconSize,d=i.setWatermask,p=i.handleBeforeUpload,f=u();function m(){l(o.value)}function x(){t&&f.value&&f.value.show()}return C((function(){A((function(){f.value&&(s.value=f.value.getIconSize(),n.value=f.value.getForm())}))})),function(e,t){var a=D,l=r;return b(),I(Y,null,[w("div",Z,[z(l,null,{title:y((function(){return t[0]||(t[0]=[w("p",null,"添加水印",-1)])})),extra:y((function(){return[w("div",ee,[z(O,{onOnToImage:h(p)},{default:y((function(){return[z(a,{type:"primary",status:"success"},{default:y((function(){return t[1]||(t[1]=[k("上传图片")])})),_:1})]})),_:1},8,["onOnToImage"]),z(a,{type:"primary",onClick:m},{default:y((function(){return t[2]||(t[2]=[k("导出图片")])})),_:1}),z(a,{type:"primary",onClick:x},{default:y((function(){return t[3]||(t[3]=[k("设置水印")])})),_:1})])]})),default:y((function(){return[w("div",te,[_(w("div",re,[z(O,{onOnToImage:h(p)},{default:y((function(){return[w("div",ae,[z(J,{type:"upload",size:52}),t[4]||(t[4]=w("p",null,"点击或者拖拽图片到这里",-1))])]})),_:1},8,["onOnToImage"])],512),[[S,!h(o).length]]),w("div",le,[w("div",null,[(b(!0),I(Y,null,V(h(o),(function(e,t){return b(),I("div",{key:t,class:"img-item",style:g({width:e.width+32+"px"})},[w("canvas",{ref_for:!0,ref:"refCanvas"+t,class:"img-canvas",width:e.width,height:e.height},null,8,ie)],4)})),128))])])])]})),_:1})]),z(H,{ref_key:"maskPropRef",ref:f,onOnSet:h(d)},null,8,["onOnSet"])],64)}}});e("default",d(oe,[["__scopeId","data-v-053bb57d"]]))}}}));

import N from"./index-C7pjrdL4.js";import{u as E,_ as D}from"./index-D5LWgAiT.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{r as H,o as O,e as z,j as y,v as i,C as l,h as b,m as n,Y as t,F as V,O as $,q as U,y as g,N as w,K as S,L as k,l as I}from"./vue--1SVMGhC.js";import{S as C}from"./index-DaoDREIv.js";import{J as j,s as F}from"./FileSaver-CeFFL67e.js";import{s as T}from"./loading-DEVpaZ89.js";import{O as L,t as A,B as J,o as M}from"./arco-BAtWUo8v.js";import"./pub-DCCNobxc.js";function P(){const{$SlMessage:x}=E(),e=H({select:{val:"jpeg",data:[{value:"jpeg",label:".jpeg"},{value:"png",label:".png"},{value:"webp",label:".webp"},{value:"ico",label:".ico"}]},data:[],maxHeight:100,columns:[{title:"#",slotName:"index"},{title:"预览",slotName:"img"},{title:"名称",dataIndex:"fileName"},{title:"大小",dataIndex:"sizeStr"},{title:"类型",dataIndex:"type"},{title:"操作",slotName:"option"}],props:{imgStyle:{width:"100px",marginTop:"4px"},optionDeleteStyle:{color:"#f53f3f",cursor:"pointer"}}});function c(s){e.value.data.push(s),s.sizeStr="".concat((s.size/1024).toFixed(2),"kb")}function f(s){e.value.data.splice(s,1)}function _(){e.value.data.length=0}function v(){const s=e.value.data,o=e.value.select.val;if(s.length<1)x.warning("图片列表为空");else{T.show();const m=new j,u=m.folder("images");s.forEach((r,h)=>{const p=r.img,a=document.createElement("canvas");a.width=p.width,a.height=p.height;const d=a.getContext("2d");d&&(d.drawImage(p,0,0,p.width,p.height),u&&(u.file("".concat(r.fileName.split(".")[0],".").concat(o),a.toDataURL("image/".concat(o===".ico"?"x-icon":o),1).substring(22),{base64:!0}),h===e.value.data.length-1&&(T.hide(),m.generateAsync({type:"blob"}).then(function(B){F(B,"images.zip")}))))})}}return O(()=>{const s=document.getElementById("a-table");s&&(e.value.maxHeight=s.offsetHeight-45)}),{table:e,handleBeforeUpload:c,tableDelete:f,tableEmpty:_,tableExportImage:v}}const q={class:"sl-layout-content"},G={class:"option-btn"},K={id:"a-table",class:"a"},R={class:"img-tip"},Y=["src"],Z=["onClick"],Q=z({__name:"index",setup(x){const{table:e,handleBeforeUpload:c,tableDelete:f,tableEmpty:_,tableExportImage:v}=P();return(s,o)=>{const m=L,u=A,r=J,h=M,p=N;return b(),y("div",q,[i(p,null,{title:l(()=>[n("div",null,[i(u,{modelValue:t(e).select.val,"onUpdate:modelValue":o[0]||(o[0]=a=>t(e).select.val=a),style:{width:"200px"},placeholder:"Please select ..."},{default:l(()=>[(b(!0),y(V,null,$(t(e).select.data,(a,d)=>(b(),U(m,{key:d,value:a.value},{default:l(()=>[g(w(a.label),1)]),_:2},1032,["value"]))),128))]),_:1},8,["modelValue"])])]),extra:l(()=>[n("div",G,[i(C,{onOnToImage:t(c)},{default:l(()=>[i(r,{type:"primary",status:"success"},{default:l(()=>o[1]||(o[1]=[g("上传图片")])),_:1})]),_:1},8,["onOnToImage"]),i(r,{type:"primary",onClick:t(v)},{default:l(()=>o[2]||(o[2]=[g("导出图片")])),_:1},8,["onClick"]),i(r,{type:"primary",status:"danger",onClick:t(_)},{default:l(()=>o[3]||(o[3]=[g("清空")])),_:1},8,["onClick"])])]),default:l(()=>[n("div",K,[S(n("div",R,[i(C,{onOnToImage:t(c)},{default:l(()=>o[4]||(o[4]=[n("div",{style:{padding:"80px 0"}},[n("p",null,"点击或者拖拽图片到这里"),n("p",{class:"sub-title"},"最多上传15张图片")],-1)])),_:1},8,["onOnToImage"])],512),[[k,!t(e).data.length]]),S(n("div",null,[i(h,{columns:t(e).columns,data:t(e).data,pagination:!1,"virtual-list-props":{height:t(e).maxHeight},scroll:{maxHeight:t(e).maxHeight}},{index:l(({rowIndex:a})=>[n("span",null,w(a+1),1)]),img:l(({record:a})=>[n("img",{src:a.img.src,style:I(t(e).props.imgStyle),alt:""},null,12,Y)]),option:l(({rowIndex:a})=>[n("span",{style:I(t(e).props.optionDeleteStyle),onClick:d=>t(f)(a)},"删除",12,Z)]),_:1},8,["columns","data","virtual-list-props","scroll"])],512),[[k,t(e).data.length]])])]),_:1})])}}}),ce=D(Q,[["__scopeId","data-v-90ce0a7e"]]);export{ce as default};

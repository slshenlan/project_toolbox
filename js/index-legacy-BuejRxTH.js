!function(){function t(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);o&&(i=i.filter((function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),e.push.apply(e,i)}return e}function o(o){for(var i=1;i<arguments.length;i++){var r=null!=arguments[i]?arguments[i]:{};i%2?t(Object(r),!0).forEach((function(t){e(o,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(r,t))}))}return o}function e(t,o,e){return(o=function(t){var o=function(t,o){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var r=e.call(t,o||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===o?String:Number)(t)}(t,"string");return"symbol"==i(o)?o:o+""}(o))in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}System.register(["./index-legacy-DQbE9N6t.js","./vue-legacy-Cowg1EAB.js","./index-legacy-Dh74zTvE.js","./pub-legacy-CbZ7AZiy.js","./index-legacy-kUEiIK1y.js","./arco-legacy-DmTh9LTc.js"],(function(t,e){"use strict";var r,n,a,l,s,h,d,c,g,p,u,x,m,b,f,w,B,v,y;return{setters:[function(t){r=t.default},function(t){n=t.h,a=t.j,l=t.k,s=t.s,h=t.N,d=t.v,c=t.C,g=t.n,p=t.J,u=t.m,x=t.l,m=t.y,b=t.K,f=t.L,w=t.e,B=t.Y},function(t){v=t._},function(t){y=t.s},null,null],execute:function(){var e=document.createElement("style");e.textContent=".vue-img-cutter[data-v-0312735b]{font-size:12px;line-height:130%}.fl[data-v-0312735b]{float:left}.fr[data-v-0312735b]{float:right}.i-dialog-footer[data-v-0312735b]{display:block;width:100%;margin-top:15px;margin-bottom:15px;text-align:left}.mask[data-v-0312735b]{background:rgba(0,0,0,.6);position:fixed;overflow-y:scroll;overflow-x:hidden;top:0;left:0;width:100%;height:100%;z-index:999}.dialogBox[data-v-0312735b]{clear:both}.dialogBoxModal[data-v-0312735b]{position:relative;padding-top:100px;padding-bottom:100px;clear:both}.dialogMainModal[data-v-0312735b]{line-height:125%;font-size:16px;position:absolute;top:100px;left:50%;margin-bottom:100px;-webkit-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translate(-50%);border:1px solid rgba(0,0,0,.8);-webkit-border-radius:3px;border-radius:3px;-webkit-box-sizing:border-box;box-sizing:border-box;padding:15px 15px 0;background:#fff;z-index:1000;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-animation:dialogShow-0312735b .3s;animation:dialogShow-0312735b .3s}.dialogMain[data-v-0312735b]{line-height:125%;font-size:16px;-webkit-box-sizing:border-box;box-sizing:border-box;background:#fff;z-index:1000;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}@-webkit-keyframes dialogShow-0312735b{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes dialogShow-0312735b{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}.toolMain[data-v-0312735b]{-webkit-box-sizing:border-box;box-sizing:border-box}.toolBox[data-v-0312735b]{border:1px solid #dedede;background-image:-webkit-linear-gradient(45deg,rgba(0,0,0,.25) 25%,transparent 0,transparent 75%,rgba(0,0,0,.25) 0),-webkit-linear-gradient(45deg,rgba(0,0,0,.25) 25%,transparent 0,transparent 75%,rgba(0,0,0,.25) 0);background-image:linear-gradient(45deg,rgba(0,0,0,.25) 25%,transparent 0,transparent 75%,rgba(0,0,0,.25) 0),linear-gradient(45deg,rgba(0,0,0,.25) 25%,transparent 0,transparent 75%,rgba(0,0,0,.25) 0);background-color:#eee;background-size:30px 30px;background-position:0 0,15px 15px;position:relative}.tool-title[data-v-0312735b]{margin-bottom:10px}.canvas[data-v-0312735b]{position:absolute;top:0;left:0;z-index:98}.canvasSelectBox[data-v-0312735b]{position:absolute;top:0;left:0;z-index:99}@-webkit-keyframes zi-antBorder-0312735b{0%{background-position:0px 0px}50%{background-position:0px 5px}to{background-position:0px 10px}}@keyframes zi-antBorder-0312735b{0%{background-position:0px 0px}50%{background-position:0px 5px}to{background-position:0px 10px}}.toolBoxControl[data-v-0312735b]{background:rgba(255,255,255,0);position:absolute;z-index:101;-webkit-box-sizing:border-box;box-sizing:border-box}.toolBoxControlBox[data-v-0312735b]{width:100%;height:100%;position:relative;background:transparent;z-index:103;pointer-events:none}.controlBoxInnerLine[data-v-0312735b]{position:absolute;z-index:1;background-size:10px 10px;background-image:-webkit-linear-gradient(135deg,rgba(64,158,255,1) 25%,rgba(64,158,255,0) 25%,rgba(64,158,255,0) 50%,rgba(64,158,255,1) 50%,rgba(64,158,255,1) 75%,rgba(64,158,255,0) 75%,rgba(64,158,255,0));background-image:linear-gradient(-45deg,#409eff 25%,rgba(64,158,255,0) 25%,rgba(64,158,255,0) 50%,#409eff 50%,#409eff 75%,rgba(64,158,255,0) 75%,rgba(64,158,255,0));-webkit-animation:zi-antBorder-0312735b .8s linear 0s infinite normal;animation:zi-antBorder-0312735b .8s linear 0s infinite normal;pointer-events:none}.controlBoxInnerLineTop[data-v-0312735b]{height:1px;width:100%;top:-1px}.controlBoxInnerLineBottom[data-v-0312735b]{height:1px;width:100%;bottom:-1px}.controlBoxInnerLineLeft[data-v-0312735b]{height:100%;width:1px;left:-1px;top:0}.controlBoxInnerLineRight[data-v-0312735b]{height:100%;width:1px;right:-1px;top:0}.toolBoxControlLine[data-v-0312735b]{position:absolute;z-index:1;background:transparent}.toolBoxControlLineItem-1[data-v-0312735b]{top:33%;width:100%;height:1px;-webkit-box-sizing:border-box;box-sizing:border-box;border-bottom:1px dashed #409eff}.toolBoxControlLineItem-2[data-v-0312735b]{top:66%;width:100%;height:1px;-webkit-box-sizing:border-box;box-sizing:border-box;border-bottom:1px dashed #409eff}.toolBoxControlLineItem-3[data-v-0312735b]{left:33%;border-right:1px dashed #409eff;height:100%;width:1px;-webkit-box-sizing:border-box;box-sizing:border-box}.toolBoxControlLineItem-4[data-v-0312735b]{left:66%;border-right:1px dashed #409eff;height:100%;width:1px;-webkit-box-sizing:border-box;box-sizing:border-box}.controlBox[data-v-0312735b]{width:100%;height:100%;position:absolute;cursor:move;z-index:1;pointer-events:none}.controlBtn[data-v-0312735b]{border:1px solid rgba(255,255,255,.5);-webkit-box-sizing:border-box;box-sizing:border-box;width:6px;height:6px;background:#409eff;position:absolute;-webkit-border-radius:50%;border-radius:50%;z-index:999;pointer-events:auto!important}.leftUp[data-v-0312735b]{top:0;left:0;margin-left:-3px;margin-top:-3px;cursor:se-resize}.leftDown[data-v-0312735b]{bottom:0;left:0;margin-left:-3px;margin-bottom:-3px;cursor:sw-resize}.rightUp[data-v-0312735b]{top:0;right:0;margin-right:-3px;margin-top:-3px;cursor:sw-resize}.rightDown[data-v-0312735b]{bottom:0;right:0;margin-right:-3px;margin-bottom:-3px;cursor:se-resize}.topCenter[data-v-0312735b]{top:0;right:50%;margin-right:-3px;margin-top:-3px;cursor:s-resize}.downCenter[data-v-0312735b]{bottom:0;right:50%;margin-right:-3px;margin-bottom:-3px;cursor:s-resize}.leftCenter[data-v-0312735b]{top:50%;left:0;margin-left:-3px;margin-top:-3px;cursor:e-resize}.rightCenter[data-v-0312735b]{top:50%;right:0;margin-right:-3px;margin-top:-3px;cursor:e-resize}.toolBar[data-v-0312735b]{margin-top:10px}.selectArea[data-v-0312735b]{display:block;width:260px;text-align:right;color:#fff;position:absolute;top:-20px;right:0;font-size:10px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.tips[data-v-0312735b]{position:absolute;top:50%;left:50%;color:red;z-index:101;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.btn[data-v-0312735b]{display:inline-block;text-align:center;background:#dedede;height:40px;line-height:40px;padding:0 20px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:4px;border-radius:4px;cursor:pointer;border:1px solid;font-size:14px;-webkit-transition:background .3s,color .3s;transition:background .3s,color .3s;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.btn[disabled][data-v-0312735b]{opacity:.6;color:#333;border-color:#dedede!important;background-color:#fff!important;cursor:default}.btn[disabled][data-v-0312735b]:hover{opacity:.6;color:#333!important;border-color:#dedede!important;background-color:#fff!important}.btn-default[data-v-0312735b]{color:#333;border-color:#dcdfe6;background-color:#fff;-webkit-transition:background .3s,color .3s;transition:background .3s,color .3s}.btn-default[data-v-0312735b]:hover{color:#409eff;border-color:#c6e2ff;background-color:#ecf5ff}.btn-primary[data-v-0312735b]{color:#fff;background-color:#409eff;border-color:#409eff;-webkit-transition:background .3s,color .3s;transition:background .3s,color .3s}.btn-primary[data-v-0312735b]:hover{background:#66b1ff;border-color:#66b1ff;color:#fff}.btn-warning[data-v-0312735b]{color:#fff;background-color:#e6a23c;border-color:#e6a23c}.btn-warning[data-v-0312735b]:hover{color:#fff;background-color:#eeba6c;border-color:#e6a23c;-webkit-transition:background .3s,color .3s;transition:background .3s,color .3s}.btn-primary-plain[data-v-0312735b]{color:#409eff;border-color:#c6e2ff;background-color:#ecf5ff;-webkit-transition:background .3s,color .3s;transition:background .3s,color .3s}.btn-primary-plain[data-v-0312735b]:hover{background:#66b1ff;border-color:#66b1ff;color:#fff}.btn-xs[data-v-0312735b]{height:26px;line-height:26px;padding:0 10px;font-size:12px}.dialog-footer[data-v-0312735b]{float:right}.fade-enter-active[data-v-0312735b],.fade-leave-active[data-v-0312735b]{-webkit-transition:opacity .3s;transition:opacity .3s}.fade-enter[data-v-0312735b],.fade-leave-to[data-v-0312735b]{opacity:0}.fade-in-enter[data-v-0312735b]{margin-top:-50px;opacity:0;-webkit-transition:margin-top .2s,opacity .2s;transition:margin-top .2s,opacity .2s}.fade-out-enter[data-v-0312735b],.fade-in-active[data-v-0312735b]{-webkit-transition:margin-top .2s,opacity .2s;transition:margin-top .2s,opacity .2s}.fade-out-active[data-v-0312735b]{margin-top:-50px;opacity:0;-webkit-transition:margin-top .2s,opacity .2s;transition:margin-top .2s,opacity .2s}.file-input[data-v-0312735b]{height:40px;line-height:40px;padding:0 10px;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:4px;border-radius:4px;border:1px solid #dedede}.file-input[data-v-0312735b]::-webkit-input-placeholder{color:#c0c4cc}.file-input[data-v-0312735b]::-moz-placeholder{color:#c0c4cc}.file-input[data-v-0312735b]:-ms-input-placeholder{color:#c0c4cc}.file-input[data-v-0312735b]::-ms-input-placeholder{color:#c0c4cc}.file-input[data-v-0312735b]::placeholder{color:#c0c4cc}.toolbar-item[data-v-0312735b]{display:inline-block}.closeIcon[data-v-0312735b]{float:right;cursor:pointer;display:block;background:#c6e2ff;color:#fff;width:18px;height:18px;line-height:18px;text-align:center;-webkit-border-radius:50%;border-radius:50%;margin:0;padding:0;-webkit-transition:background .3s,-webkit-transform .3s;transition:background .3s,-webkit-transform .3s;transition:transform .3s,background .3s;transition:transform .3s,background .3s,-webkit-transform .3s}.closeIcon[data-v-0312735b]:hover{background:#409eff;-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.copyright[data-v-0312735b]{font-size:10px!important;clear:both!important;width:100%!important;text-align:right!important;display:block!important;opacity:.5!important;position:absolute!important;bottom:0!important;right:0!important;line-height:100%!important;z-index:100!important}.copyright a[data-v-0312735b]{color:#fff!important;text-decoration:none!important;position:relative!important;opacity:1!important;display:inline-block!important;padding:2px!important;background:rgba(0,0,0,.4)}.dockMain[data-v-0312735b]{position:absolute;z-index:1002;bottom:5px;left:5px;opacity:.5;-webkit-transition:opacity .5s;transition:opacity .5s;-webkit-box-sizing:border-box;box-sizing:border-box;padding:5px;-webkit-border-radius:5px;border-radius:5px}.dockMain[data-v-0312735b]:hover{opacity:1}.dockBtn[data-v-0312735b]{font-size:10px;cursor:pointer;display:inline-block;margin-right:4px;color:#409eff;border:1px solid #c6e2ff;background-color:#ecf5ff;padding:1px 4px;-webkit-border-radius:3px;border-radius:3px;height:20px;line-height:16px;-webkit-transition:background .2s,color .2s;transition:background .2s,color .2s;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.dockBtn[data-v-0312735b]:hover{color:#fff;background-color:#409eff;border-color:#409eff}.dockBtnScrollBar[data-v-0312735b]{display:inline-block;margin-right:4px;margin-left:10px;background:#409eff;width:200px;height:10px;-webkit-border-radius:5px;border-radius:5px;position:relative;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.scrollBarControl[data-v-0312735b]{position:absolute;cursor:pointer;background:#fff;border:2px solid #409eff;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:50%;border-radius:50%;width:20px;height:20px;top:50%;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-box-shadow:0 0 3px #1f5184;box-shadow:0 0 3px #1f5184}.scrollBarText[data-v-0312735b]{position:absolute;cursor:pointer;background:rgba(0,0,0,.7);color:#fff;top:-16px;height:16px;line-height:16px;text-align:center;font-size:10px;white-space:nowrap;min-width:50px;-webkit-border-radius:3px;border-radius:3px;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.img-cut-content[data-v-ac78da1b]{padding-top:10px}.img-cut-content[data-v-ac78da1b] .dialogMain{margin:auto}.img-cut-content[data-v-ac78da1b] .dialogMain .copyright{display:none!important}\n",document.head.appendChild(e);var I="3.0.5",k={name:"ImgCutter",props:{crossOrigin:{type:Boolean,default:!1,required:!1},crossOriginHeader:{type:String,default:"*",required:!1},label:{type:String,default:"选择图片",required:!1},isModal:{type:Boolean,default:!0,required:!1},lockScroll:{type:Boolean,default:!0,required:!1},showChooseBtn:{type:Boolean,default:!0,required:!1},boxWidth:{type:Number,default:800,required:!1},boxHeight:{type:Number,default:400,required:!1},cutWidth:{type:Number,default:200,required:!1},cutHeight:{type:Number,default:200,required:!1},rate:{type:String,default:null,required:!1},tool:{type:Boolean,default:!0,required:!1},toolBgc:{type:String,default:"#fff",required:!1},imgMove:{type:Boolean,default:!0,required:!1},sizeChange:{type:Boolean,default:!0,required:!1},originalGraph:{type:Boolean,default:!1,required:!1},moveAble:{type:Boolean,default:!0,required:!1},previewMode:{type:Boolean,default:!0,required:!1},CuttingOriginal:{type:Boolean,default:!1,required:!1},WatermarkText:{type:String,default:"",required:!1},WatermarkTextFont:{type:String,default:"12px Sans-serif",required:!1},WatermarkTextColor:{type:String,default:"#fff",required:!1},WatermarkTextX:{type:Number,default:.95,required:!1},WatermarkTextY:{type:Number,default:.95,required:!1},smallToUpload:{type:Boolean,default:!1,required:!1},saveCutPosition:{type:Boolean,default:!1,required:!1},scaleAble:{type:Boolean,default:!0,required:!1},index:{default:null,required:!1},fileType:{default:"png",required:!1,type:String},toolBoxOverflow:{type:Boolean,default:!0,required:!1},DoNotDisplayCopyright:{type:Boolean,default:!1,required:!1},quality:{type:Number,default:1,required:!1},accept:{type:String,default:"image/gif, image/jpeg ,image/png",required:!1}},model:["label","boxWidth","boxHeight","rate","tool","DoNotDisplayCopyright"],data:function(){return{version:"",visible:!1,fileName:"",cutImageObj:null,onPrintImgTimmer:null,toolBoxPosition:{x:0,y:0},drawImg:{img:null,sx:0,sy:0,swidth:0,sheight:0,x:0,y:0,width:0,height:0},toolBox:{disable:!0,width:this.boxWidth/2,height:this.boxHeight/2,x:0,y:0,boxMove:{start:{x:0,y:0},moveTo:{x:0,y:0}}},dropImg:{active:!1,pageX:0,pageY:0,params:{}},rotateImg:{angle:0},rotateControl:{active:!1,start:{x:0,y:0},position:100},scaleImg:{rate:0,params:{}},controlBox:{disable:!0,btnName:"",start:{x:0,y:0,width:0,height:0}},selectBox:!1,selectBoxColor:"rgba(0,0,0,0.6)",isFlipHorizontal:!1,isFlipVertically:!1}},mounted:function(){var t=this;this.version=I,!1===this.isModal&&(this.visible=!0,this.$nextTick((function(){t.$refs.toolBox&&(t.$refs.toolBox.onmousewheel=t.scaleImgWheel,t.$refs.toolBox.addEventListener("DOMMouseScroll",t.scaleImgWheel))})))},methods:{handleOpen:function(t){var o=this,e=function(t){if(o.$refs.toolBox&&(o.$refs.toolBox.onmousewheel=o.scaleImgWheel,o.$refs.toolBox.addEventListener("DOMMouseScroll",o.scaleImgWheel)),!0===o.isModal){!0===o.lockScroll&&(document.body.style.overflowY="hidden");var e=o.$refs.dialogMainModalRef.offsetHeight+200,i=window.innerHeight,r=o.$refs.mask;r.style.overflowY=e>i?"scroll":"hidden"}t&&"function"==typeof t&&t()};if(t&&"object"==i(t)&&t.src){if(!t.name)throw new Error("传入参数必须包含：src,name");var r=new Image;!0===this.crossOrigin&&(r.crossOrigin=this.crossOriginHeader),r.name=t.name,r.style.position="fixed",r.style.top="-5000px",r.style.opacity=0,r.onerror=function(t){console.error("图片加载失败"),o.$emit("error",{index:o.index,event:t,msg:"图片加载失败"}),o.clearCutImageObj()},r.onerror=function(t){throw o.$emit("onImageLoadError",t),new Error("图片加载失败")},r.onload=function(){if(!0!==r.complete)throw new Error("图片加载失败");o.$emit("onImageLoadComplete",r),o.visible=!0,o.$nextTick((function(){e((function(){o.importImgToCanv(r)}))}))},r.src=t.src,this.cutImageObj=r,document.body.appendChild(r),this.$emit("onChooseImg",t,this.index)}else this.visible=!0,this.$nextTick((function(){e()}))},handleClose:function(){var t=this;this.clearAll(),!0===this.isModal&&(!0===this.lockScroll&&(document.body.style.overflowY="scroll"),this.$nextTick((function(){t.visible=!1})))},chooseImg:function(){this.$refs.inputFile.click()},importImgToCanv:function(t){var e,i=t.height,r=t.width,n=this.boxWidth,a=this.boxHeight,l=o({},this.drawImg);this.fileName=t.name,l.img=t,this.scaleImg.rate=r/i,i<a&&r<n?(e=1,l.x=(n-r)/2,l.y=(a-i)/2):r/i<=n/a?(e=a/i,l.x=(n-r*e)/2):(e=n/r,l.y=(a-i*e)/2),l.swidth=r,l.sheight=i,l.width=r*e,l.height=i*e,l.x=(n-l.width)/2,l.y=(a-l.height)/2,this.drawImg=l,this.printImg(),this.putToolBox()},putImgToCanv:function(t){var e,i=this;if(!t.target.files)return console.error("IE9及以下需要自己传入image对象"),!1;if(e=t.target.files[0]||null){this.fileName=e.name;var r=new FileReader;r.readAsDataURL(e),r.onload=function(t){var n=t.target.result,a=document.createElement("img");a.src=n;var l=setInterval((function(){if(2===r.readyState){if(clearInterval(l),!i.sizeChange&&i.smallToUpload&&a.width<=i.cutWidth&&a.height<=i.cutHeight)return i.handleClose(),e.name=i.changeFileName(e.name,i.fileType),void i.$emit("cutDown",{filename:i.changeFileName(e.name,i.fileType),file:e,index:i.index});var t,n=a.height,s=a.width,h=i.boxWidth,d=i.boxHeight,c=o({},i.drawImg);c.img=a,i.scaleImg.rate=s/n,n<d&&s<h?(t=1,c.x=(h-s)/2,c.y=(d-n)/2):s/n<=h/d?(t=d/n,c.x=(h-s*t)/2):(t=h/s,c.y=(d-n*t)/2),c.swidth=s,c.sheight=n,c.width=s*t,c.height=n*t,c.x=(h-c.width)/2,c.y=(d-c.height)/2,i.drawImg=c,i.printImg(),i.putToolBox()}}),200)},this.$emit("onChooseImg",e,this.index)}},putToolBox:function(){var t=this;this.toolBox.width!==this.boxWidth/2&&this.toolBox.height!==this.boxHeight/2&&!1!==this.saveCutPosition||(this.toolBox.width=this.cutWidth>this.boxWidth?this.boxWidth:this.cutWidth,this.toolBox.height=this.cutHeight>this.boxHeight?this.boxHeight:this.cutHeight),(0===this.toolBox.x&&0===this.toolBox.y||!1===this.saveCutPosition)&&(this.toolBox.x=this.boxWidth/2-this.toolBox.width/2,this.toolBox.y=this.boxHeight/2-this.toolBox.height/2),this.checkToolBoxOverflow().then((function(){t.printImg()})),this.drawControlBox(this.toolBox.width,this.toolBox.height,this.toolBox.x,this.toolBox.y)},checkToolBoxOverflow:function(){var t=this;return new Promise((function(o){if(!t.toolBoxOverflow){if(t.drawImg.width<t.toolBox.width||t.drawImg.height<t.toolBox.height){var e=t.drawImg.width/t.drawImg.height;t.drawImg.width<t.toolBox.width&&(t.drawImg.width=t.toolBox.width,t.drawImg.height=t.drawImg.width/e),t.drawImg.height<t.toolBox.height&&(t.drawImg.height=t.toolBox.height,t.drawImg.width=t.drawImg.height*e),t.drawImg.x=(t.boxWidth-t.drawImg.width)/2,t.drawImg.y=(t.boxHeight-t.drawImg.height)/2}console.log("this.drawImg.y > this.toolBox.y",t.drawImg.y+t.drawImg.height,t.toolBox.y+t.toolBox.height),t.drawImg.x>t.toolBox.x&&(t.drawImg.x=t.toolBox.x),t.drawImg.x+t.drawImg.width<t.toolBox.x+t.toolBox.width&&(t.drawImg.x=t.toolBox.x+t.toolBox.width-t.drawImg.width),t.drawImg.y>t.toolBox.y&&(t.drawImg.y=t.toolBox.y),t.drawImg.y+t.drawImg.height<t.toolBox.y+t.toolBox.height&&(t.drawImg.y=t.toolBox.y+t.toolBox.height-t.drawImg.height)}o()}))},isSupportFileApi:function(){return!!(window.File&&window.FileList&&window.FileReader&&window.Blob&&-1===navigator.userAgent.indexOf("Edge")&&-1===navigator.userAgent.indexOf("MSIE")&&-1===navigator.userAgent.indexOf("Trident"))},dataURLtoFile:function(t,o){for(var e=t.split(","),i=e[0].match(/:(.*?);/)[1],r=atob(e[1]),n=r.length,a=new Uint8Array(n);n--;)a[n]=r.charCodeAt(n);return this.isSupportFileApi()?new File([a],o,{type:i}):"不支持File对象"},clearAll:function(){var t=this,o=t.$refs.canvas;o.getContext("2d").clearRect(0,0,o.width,o.height);var e=t.$refs.canvasSelectBox;e.getContext("2d").clearRect(0,0,e.width,e.height);var i=t.drawImg.sx,r=t.drawImg.sy;this.drawImg={img:null,sx:i,sy:r,swidth:0,sheight:0,x:0,y:0,width:0,height:0},this.isFlipHorizontal=!1,this.isFlipVertically=!1,this.$refs.inputFile.value="",this.rotateImg.angle=0,this.drawImg.img=null,this.turnReset(),this.clearCutImageObj(),this.$emit("onClearAll",this.index)},clearCutImageObj:function(){null!==this.cutImageObj&&void 0!==this.cutImageObj&&("function"==typeof this.cutImageObj.remove?this.cutImageObj.remove():this.cutImageObj.removeNode()),this.cutImageObj=null},drawControlBox:function(t,o,e,i){var r=this;this.toolBoxOverflow||(t<1&&(t=1),o<1&&(o=1),t>this.drawImg.width&&(t=this.drawImg.width),o>this.drawImg.height&&(o=this.drawImg.height),e<this.drawImg.x&&(e=this.drawImg.x),i<this.drawImg.y&&(i=this.drawImg.y),e>this.drawImg.x+this.drawImg.width-t&&(e=this.drawImg.x+this.drawImg.width-t),i>this.drawImg.y+this.drawImg.height-o&&(i=this.drawImg.y+this.drawImg.height-o)),t>this.boxWidth&&(t=this.boxWidth),o>this.boxHeight&&(o=this.boxHeight),e<0&&(e=0),i<0&&(i=0);var n,a,l=this.$refs.toolBoxControl,s=this.$refs.canvasSelectBox,h=s.getContext("2d");if(h.fillStyle=this.selectBoxColor,h.clearRect(0,0,s.width,s.height),h.fillRect(0,0,s.width,s.height),this.rate&&""!==this.rate){var d=this.rate.split(":")[0]/this.rate.split(":")[1];d>=1?(n=t,(a=t/d)+i>this.drawImg.y+this.drawImg.height&&(n=(a=this.drawImg.y+this.drawImg.height-i)*d)):(n=o*d,a=o)}else n=t,a=o;this.toolBox.width=Math.abs(n),this.toolBox.height=Math.abs(a),l.style.width=Math.abs(n)+"px",l.style.height=Math.abs(a)+"px",this.toolBox.boxMove.moveTo.x=e,this.toolBox.boxMove.moveTo.y=i,n<0&&(e+=n),a<0&&(i+=a),e+this.toolBox.width>this.boxWidth&&(e=this.boxWidth-this.toolBox.width),e<0&&(e=0),i+this.toolBox.height>this.boxHeight&&(i=this.boxHeight-this.toolBox.height),i<0&&(i=0),this.toolBoxPosition.x=e,this.toolBoxPosition.y=i,l.style.left=e+"px",l.style.top=i+"px",h.clearRect(e,i,Math.abs(n),Math.abs(a)),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){r.cropPicture(!0)}),100)},resetToolBox:function(){this.toolBox.width<0&&(this.toolBox.boxMove.moveTo.x=this.toolBox.x-this.toolBox.width),this.toolBox.height<0&&(this.toolBox.boxMove.moveTo.y=this.toolBox.y-this.toolBox.height),this.toolBox.width=Math.abs(this.toolBox.width),this.toolBox.height=Math.abs(this.toolBox.height)},toolBoxMouseDown:function(t){var o=this.$refs.toolBoxControl;this.toolBox.x=parseInt(o.style.left.split("px")[0]),this.toolBox.y=parseInt(o.style.top.split("px")[0]),this.toolBox.disable=!1,this.dropImg.active=!1,this.toolBox.boxMove.start={x:t.pageX,y:t.pageY}},toolBoxMouseMove:function(t){if(this.dropImg.active&&this.dropImgMove(t),!1===this.toolBox.disable&&!0===this.moveAble){var o=t.pageX-this.toolBox.boxMove.start.x,e=t.pageY-this.toolBox.boxMove.start.y,i=this.toolBox.x+o,r=this.toolBox.y+e;this.drawControlBox(this.toolBox.width,this.toolBox.height,i,r)}},toolBoxMouseLeave:function(){var t=this;this.toolBox.disable=!0,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){t.cropPicture(!0)}),100),this.resetToolBox()},toolBoxMouseUp:function(){this.toolBox.x=parseInt(this.toolBoxPosition.x),this.toolBox.y=parseInt(this.toolBoxPosition.y),this.toolBox.disable=!0,this.dropImg.active=!1,this.resetToolBox()},printImg:function(){var t=this;if(this.drawImg.img){var o=this.$refs.canvas,e=o.getContext("2d");e.font="18px bold 黑体",e.fillStyle="#ff0",e.textAlign="center",e.textBaseline="middle",e.save(),e.clearRect(0,0,o.width,o.height),e.translate(this.drawImg.x+this.drawImg.width/2,this.drawImg.y+this.drawImg.height/2),e.rotate(this.rotateImg.angle*Math.PI/180),e.translate(-(this.drawImg.x+this.drawImg.width/2),-(this.drawImg.y+this.drawImg.height/2)),e.translate(this.drawImg.x,this.drawImg.y),e.scale(this.isFlipHorizontal?-1:1,this.isFlipVertically?-1:1),e.drawImage(this.drawImg.img,this.drawImg.sx,this.drawImg.sy,this.drawImg.swidth,this.drawImg.sheight,this.isFlipHorizontal?-this.drawImg.width:0,this.isFlipVertically?-this.drawImg.height:0,this.drawImg.width,this.drawImg.height),e.translate(-this.drawImg.x,this.drawImg.y),e.restore(),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){t.cropPicture(!0)}),100)}},dropImgOn:function(t){!0===this.imgMove&&(this.dropImg.active=!0,this.dropImg.params=o({},this.drawImg),this.dropImg.pageX=t.pageX,this.dropImg.pageY=t.pageY)},dropImgOff:function(){var t=this;this.dropImg.active=!1,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((function(){t.cropPicture(!0)}),100)},dropImgMove:function(t){if(this.dropImg.active&&this.drawImg.img){var e=o({},this.drawImg);e.x=this.dropImg.params.x-(this.dropImg.pageX-t.pageX),e.y=this.dropImg.params.y-(this.dropImg.pageY-t.pageY),this.toolBoxOverflow||(e.x>this.toolBox.x&&(e.x=this.toolBox.x),e.x<this.toolBox.x+this.toolBox.width-e.width&&(e.x=this.toolBox.x+this.toolBox.width-e.width),e.y>this.toolBox.y&&(e.y=this.toolBox.y),e.y<this.toolBox.y+this.toolBox.height-e.height&&(e.y=this.toolBox.y+this.toolBox.height-e.height)),this.drawImg=e,this.printImg(),t.stopPropagation()}},scaleReset:function(){this.drawImg.width=this.drawImg.swidth,this.drawImg.height=this.drawImg.sheight,this.printImg()},scaleImgWheel:function(t){var o=this;if(this.drawImg.img&&!0===this.scaleAble){var e,i=t||window.event;i.wheelDelta?e=-i.wheelDelta/40:i.detail&&(e=i.detail);this.drawImg.x=this.drawImg.width-9*e>50?this.drawImg.x+3*e:this.drawImg.x,this.drawImg.y=this.drawImg.width-9*e>50?this.drawImg.y+3*e:this.drawImg.y,this.drawImg.width=this.drawImg.width-9*e>50?this.drawImg.width-9*e:50,this.drawImg.height=this.drawImg.width/this.scaleImg.rate,this.checkToolBoxOverflow().then((function(){o.printImg(),o.onPrintImgTimmer&&clearTimeout(o.onPrintImgTimmer),o.onPrintImgTimmer=setTimeout((function(){o.cropPicture(!0)}),100)}))}return t.preventDefault(),t.returnValue=!1,!1},flipHorizontal:function(){this.drawImg.img&&(0==this.isFlipHorizontal?this.isFlipHorizontal=!0:this.isFlipHorizontal=!1,this.printImg())},flipVertically:function(){this.drawImg.img&&(0==this.isFlipVertically?this.isFlipVertically=!0:this.isFlipVertically=!1,this.printImg())},turnImg:function(t){var o=this.rotateImg.angle+t;o>=-180&&o<=180&&(this.rotateImg.angle=o,this.rotateControl.position=o/180*100+100,this.printImg("rotate"))},turnReset:function(){this.rotateImg.angle=0,this.rotateControl.position=100,this.printImg("rotate")},controlBtnMouseDown:function(t,o){this.controlBox.disable=!1,this.controlBox.btnName=o,this.controlBox.start.x=t.clientX,this.controlBox.start.y=t.clientY,this.controlBox.start.width=this.toolBox.width,this.controlBox.start.height=this.toolBox.height,t.stopPropagation()},controlBtnMouseUp:function(t){this.controlBox.disable=!0,this.dropImgOff(),this.resetToolBox(),this.toolBoxMouseUp(),t.stopPropagation()},controlBtnMouseMove:function(t){if(!1===this.controlBox.disable){var o,e,i=t.clientX-this.controlBox.start.x,r=t.clientY-this.controlBox.start.y;if("leftUp"==this.controlBox.btnName){if(this.rate){var n=this.rate.split(":")[0]/this.rate.split(":")[1];n>=1?(o=this.toolBox.x+i,e=this.toolBox.y+i/n):(o=this.toolBox.x+r*n,e=this.toolBox.y+r)}else o=this.toolBox.x+i,e=this.toolBox.y+r;this.toolBox.width=this.controlBox.start.width-i,this.toolBox.height=this.controlBox.start.height-r}if("rightUp"==this.controlBox.btnName){if(this.rate){var a=this.rate.split(":")[0]/this.rate.split(":")[1];a>=1?(o=this.toolBox.x,e=this.toolBox.y-i/a):(o=this.toolBox.x,e=this.toolBox.y+r)}else o=this.toolBox.x,e=this.toolBox.y+r;this.toolBox.width=this.controlBox.start.width+i,this.toolBox.height=this.controlBox.start.height-r}if("rightDown"==this.controlBox.btnName&&(o=this.toolBox.x,e=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+i,this.toolBox.height=this.controlBox.start.height+r),"leftDown"==this.controlBox.btnName){if(this.rate){var l=this.rate.split(":")[0]/this.rate.split(":")[1];l>=1?(o=this.toolBox.x+i,e=this.toolBox.y):(o=this.toolBox.x+-r*l,e=this.toolBox.y)}else o=this.toolBox.x+i,e=this.toolBox.y;this.toolBox.width=this.controlBox.start.width-i,this.toolBox.height=this.controlBox.start.height+r}"topCenter"==this.controlBox.btnName&&(o=this.toolBox.x,e=this.toolBox.y+r,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height-r),"downCenter"==this.controlBox.btnName&&(o=this.toolBox.x,e=this.toolBox.y,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height+r),"leftCenter"==this.controlBox.btnName&&(o=this.toolBox.x+i,e=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-i,this.toolBox.height=this.controlBox.start.height),"rightCenter"==this.controlBox.btnName&&(o=this.toolBox.x,e=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+i,this.toolBox.height=this.controlBox.start.height),this.drawControlBox(this.toolBox.width,this.toolBox.height,o,e)}t.stopPropagation()},changeFileName:function(t,o){var e=t.lastIndexOf(".");return t.substr(0,e+1)+("jpeg"===o?"jpg":o)},cropPicture:function(t){var o=this;if(this.drawImg.img){var e=this.$refs.canvas;if(this.WatermarkText&&!t){var i=e.getContext("2d");i.font=this.WatermarkTextFont,i.fillStyle=this.WatermarkTextColor,i.textAlign="right",i.textBaseline="bottom",i.fillText(this.WatermarkText,this.toolBox.x+this.toolBox.width*this.WatermarkTextX,this.toolBox.y+this.toolBox.height*this.WatermarkTextY)}var r=new Image;!0===this.crossOrigin&&(r.crossOrigin=this.crossOriginHeader),r.src=e.toDataURL("image/".concat(this.fileType),o.quality),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,i,r){window.atob?setTimeout((function(){for(var n,a=atob(e.toDataURL(i,r).split(",")[1]),l=a.length,s=new Uint8Array(l),h=0;h<l;h++)s[h]=a.charCodeAt(h);try{n=new Blob([s],{type:"image/".concat(o.fileType)})}catch(c){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"==c.name&&window.BlobBuilder){var d=new(0,window.BlobBuilder);d.append(s.buffer),n=d.getBlob("image/".concat(o.fileType))}"InvalidStateError"==c.name&&(n=new Blob([s.buffer],{type:"image/".concat(o.fileType)}))}t(n)}),200):t(!1,{type:"image/".concat(o.fileType)})}}),e.toBlob((function(e){if(e){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){var e=setInterval((function(){if(2==i.readyState){clearInterval(e);var n=document.createElement("canvas"),a=n.getContext("2d");if(1==o.originalGraph){var l=o.drawImg.width/o.drawImg.swidth,s=o.toolBox.width/l,h=o.toolBox.height/l;n.width=s,n.height=h;var d=(o.toolBox.x-o.drawImg.x)/l,c=(o.toolBox.y-o.drawImg.y)/l,g=o.drawImg.swidth,p=o.drawImg.sheight;a.translate(-d,-c),a.drawImage(o.drawImg.img,0,0,g,p)}else{n.width=o.toolBox.width,n.height=o.toolBox.height;var u=o.toolBox;if(o.rate){var x=o.rate.split(":")[0]/o.rate.split(":")[1];o.rate.split(":")[0]>=o.rate.split(":")[1]?a.drawImage(r,u.x,u.y,u.width,u.width*x,0,0,u.width,u.width*x):a.drawImage(r,u.x,u.y,u.width,u.width/x,0,0,u.width,u.width/x)}else a.drawImage(r,u.x,u.y,u.width,u.height,0,0,u.width,u.height)}n.toBlob((function(e){var i=o.changeFileName(o.fileName,o.fileType);t?o.previewMode&&o.$emit("onPrintImg",{index:o.index,fileName:i,blob:e,file:o.dataURLtoFile(n.toDataURL("image/".concat(o.fileType),o.quality),i),dataURL:n.toDataURL("image/".concat(o.fileType),o.quality)}):(o.handleClose(),o.$emit("cutDown",{index:o.index,fileName:i,blob:e,file:o.dataURLtoFile(n.toDataURL("image/".concat(o.fileType),o.quality),i),dataURL:n.toDataURL("image/".concat(o.fileType),o.quality)}))}),"image/".concat(o.fileType),o.quality)}}),200)}}else{var n=document.createElement("canvas");n.width=o.toolBox.width,n.height=o.toolBox.height;var a=n.getContext("2d"),l=o.toolBox;if(o.rate){var s=o.rate.split(":")[0]/o.rate.split(":")[1];a.drawImage(r,l.x,l.y,l.width,l.width*s,0,0,l.width,l.width*s)}else a.drawImage(r,l.x,l.y,l.width,l.height,0,0,l.width,l.height);var h=o.changeFileName(o.fileName,o.fileType);t?o.$emit("onPrintImg",{fileName:h,dataURL:n.toDataURL("image/".concat(o.fileType),o.quality)}):(o.handleClose(),o.$emit("cutDown",{fileName:h,dataURL:n.toDataURL("image/".concat(o.fileType),o.quality)}))}}),"image/".concat(o.fileType),o.quality)}else t||(console.warn("No picture selected"),o.$emit("error",{err:1,msg:"No picture selected"}))},scrollBarControlMove:function(t){if(this.rotateControl.active){var o=t.pageX-this.rotateControl.start.x,e=this.rotateControl.start.position+o;e<=0&&(e=0),e>=200&&(e=200),this.rotateControl.position=e,this.rotateImg.angle=(e-100)/100*180,this.printImg()}},scrollBarControlOn:function(t){this.rotateControl.active=!0,this.rotateControl.start.x=t.pageX,this.rotateControl.start.y=t.pageY,this.rotateControl.start.position=this.rotateControl.position},scrollBarControlOff:function(){this.rotateControl.active=!1}},computed:{showToolBoxWidth:function(){var t;return t=this.originalGraph?this.toolBox.width/(this.drawImg.width/this.drawImg.swidth):this.toolBox.width,Number(t).toFixed(0)},showToolBoxHeight:function(){var t;return t=this.originalGraph?this.toolBox.height/(this.drawImg.width/this.drawImg.swidth):this.toolBox.height,Number(t).toFixed(0)},showToolBoxX:function(){var t;return t=this.toolBoxPosition.x,Number(t).toFixed(0)},showToolBoxY:function(){var t;return t=this.toolBoxPosition.y,Number(t).toFixed(0)}}},C={class:"toolMain"},M={key:0,class:"tool-title"},T={class:"tips"},z={key:0,class:"dockBtn"},O={key:4,class:"dockBtnScrollBar"},L={class:"toolBoxControlBox"},D={class:"controlBox"},P={class:"selectArea"},S={class:"copyright"},$={key:0,target:"_blank",href:"https://github.com/acccccccb/vue-img-cutter",rel:"nofollow"},q=["width","height"],N=["width","height"],F={class:"i-dialog-footer",style:{height:"40px"}},W=["accept"],H={key:0,class:"btn btn-primary btn-primary-plain"},U={class:"btn-group fr"},R=["disabled"];var j=v(k,[["render",function(t,o,e,i,r,w){return n(),a("div",null,[!0===e.showChooseBtn&&!0===e.isModal?(n(),a("div",{key:0,onClick:o[0]||(o[0]=function(){return w.handleOpen&&w.handleOpen.apply(w,arguments)})},[l(t.$slots,"openImgCutter",{},void 0,!0),l(t.$slots,"open",{},void 0,!0)])):s("",!0),t.$slots.openImgCutter||t.$slots.open||!0!==e.isModal?s("",!0):(n(),a("button",{key:1,type:"button",class:"btn btn-primary",onClick:o[1]||(o[1]=function(){return w.handleOpen&&w.handleOpen.apply(w,arguments)})},h(e.label),1)),d(p,{name:"fade"},{default:c((function(){return[r.visible?(n(),a("div",{key:0,class:g(!0===e.isModal?"mask vue-img-cutter":""),ref:"mask"},[r.visible?(n(),a("div",{key:0,class:g(!0===e.isModal?"dialogBoxModal":"dialogBox")},[d(p,{name:"fade","enter-class":"fade-in-enter","enter-active-class":"fade-in-active","leave-class":"fade-out-enter","leave-active-class":"fade-out-active"},{default:c((function(){return[u("div",{ref:"dialogMainModalRef",class:g(!0===e.isModal?"dialogMainModal":"dialogMain"),style:x("width:"+(!0===e.isModal?e.boxWidth+32:e.boxWidth)+"px")},[u("div",C,[!0===e.isModal?(n(),a("div",M,[o[37]||(o[37]=m(" 图片裁剪 ")),u("span",{class:"closeIcon",onClick:o[2]||(o[2]=function(){return w.handleClose&&w.handleClose.apply(w,arguments)})},"×")])):s("",!0),u("div",{ref:"toolBox",style:x("height:"+e.boxHeight+"px;width:"+e.boxWidth+"px"),onMousemove:o[30]||(o[30]=function(){return w.controlBtnMouseMove&&w.controlBtnMouseMove.apply(w,arguments)}),onMouseup:o[31]||(o[31]=function(){return w.controlBtnMouseUp&&w.controlBtnMouseUp.apply(w,arguments)}),onMouseleave:o[32]||(o[32]=function(){return w.controlBtnMouseUp&&w.controlBtnMouseUp.apply(w,arguments)}),class:"toolBox"},[b(u("div",T,[u("div",{class:"btn btn-warning btn-xs",onClick:o[3]||(o[3]=function(){return w.chooseImg&&w.chooseImg.apply(w,arguments)})},h(e.label),1)],512),[[f,!r.drawImg.img&&!0===e.showChooseBtn]]),1==e.tool?b((n(),a("div",{key:0,class:"dockMain",style:x("background:"+e.toolBgc),onMouseenter:o[14]||(o[14]=function(){return w.dropImgOff&&w.dropImgOff.apply(w,arguments)})},[e.rate?(n(),a("div",z,[l(t.$slots,"ratio",{},(function(){return[o[38]||(o[38]=m(" Ratio: "))]}),!0),m(" "+h(e.rate),1)])):s("",!0),u("div",{class:"dockBtn",onClick:o[4]||(o[4]=function(){return w.scaleReset&&w.scaleReset.apply(w,arguments)})},[l(t.$slots,"scaleReset",{},(function(){return[o[39]||(o[39]=m(" Scale: "))]}),!0),m(" "+h(r.drawImg.swidth>0?(r.drawImg.width/r.drawImg.swidth).toFixed(2):"-"),1)]),!1===e.originalGraph?(n(),a("div",{key:1,onClick:o[5]||(o[5]=function(t){return w.turnImg(-90)}),class:"dockBtn"},[l(t.$slots,"turnLeft",{},(function(){return[o[40]||(o[40]=m(" ↳ "))]}),!0)])):s("",!0),!1===e.originalGraph?(n(),a("div",{key:2,onClick:o[6]||(o[6]=function(t){return w.turnImg(90)}),class:"dockBtn"},[l(t.$slots,"turnRight",{},(function(){return[o[41]||(o[41]=m(" ↲ "))]}),!0)])):s("",!0),!1===e.originalGraph?(n(),a("div",{key:3,onClick:o[7]||(o[7]=function(t){return w.turnReset()}),class:"dockBtn"},[l(t.$slots,"reset",{},(function(){return[o[42]||(o[42]=m(" ↻ "))]}),!0)])):s("",!0),!1===e.originalGraph?(n(),a("div",O,[u("div",{ref:"dockBtnScrollControl",onMousemove:o[8]||(o[8]=function(){return w.scrollBarControlMove&&w.scrollBarControlMove.apply(w,arguments)}),onMousedown:o[9]||(o[9]=function(){return w.scrollBarControlOn&&w.scrollBarControlOn.apply(w,arguments)}),onMouseleave:o[10]||(o[10]=function(){return w.scrollBarControlOff&&w.scrollBarControlOff.apply(w,arguments)}),onMouseup:o[11]||(o[11]=function(){return w.scrollBarControlOff&&w.scrollBarControlOff.apply(w,arguments)}),style:x("left:"+r.rotateControl.position+"px"),class:"scrollBarControl"},null,36),1==r.rotateControl.active?(n(),a("div",{key:0,class:"scrollBarText",style:x("left:"+r.rotateControl.position+"px")},h(r.rotateImg.angle.toFixed(0)+"°"),5)):s("",!0)])):s("",!0),!1===e.originalGraph?(n(),a("div",{key:5,onClick:o[12]||(o[12]=function(){return w.flipHorizontal&&w.flipHorizontal.apply(w,arguments)}),class:"dockBtn"},[l(t.$slots,"flipHorizontal",{},(function(){return[o[43]||(o[43]=m(" ⇆ "))]}),!0)])):s("",!0),!1===e.originalGraph?(n(),a("div",{key:6,onClick:o[13]||(o[13]=function(){return w.flipVertically&&w.flipVertically.apply(w,arguments)}),class:"dockBtn"},[l(t.$slots,"flipVertically",{},(function(){return[o[44]||(o[44]=m(" ⇅ "))]}),!0)])):s("",!0)],36)),[[f,r.drawImg.img&&!0!==r.dropImg.active&&1==r.controlBox.disable&&1==r.toolBox.disable]]):s("",!0),b(u("div",{ref:"toolBoxControl",onMousedown:o[23]||(o[23]=function(){return w.toolBoxMouseDown&&w.toolBoxMouseDown.apply(w,arguments)}),onMouseup:o[24]||(o[24]=function(){return w.toolBoxMouseUp&&w.toolBoxMouseUp.apply(w,arguments)}),onMousemove:o[25]||(o[25]=function(){return w.toolBoxMouseMove&&w.toolBoxMouseMove.apply(w,arguments)}),onMouseleave:o[26]||(o[26]=function(){return w.toolBoxMouseLeave&&w.toolBoxMouseLeave.apply(w,arguments)}),class:"toolBoxControl",style:x({pointerEvents:e.moveAble?"auto":"none"})},[u("div",L,[u("div",D,[o[45]||(o[45]=u("div",{class:"controlBoxInnerLine controlBoxInnerLineTop"},null,-1)),o[46]||(o[46]=u("div",{class:"controlBoxInnerLine controlBoxInnerLineBottom"},null,-1)),o[47]||(o[47]=u("div",{class:"controlBoxInnerLine controlBoxInnerLineLeft"},null,-1)),o[48]||(o[48]=u("div",{class:"controlBoxInnerLine controlBoxInnerLineRight"},null,-1)),u("div",P," 宽:"+h(w.showToolBoxWidth)+" 高:"+h(w.showToolBoxHeight)+" (x:"+h(w.showToolBoxX)+",y:"+h(w.showToolBoxY)+") ",1),!0===e.sizeChange?(n(),a("div",{key:0,"data-name":"leftUp",onMousedown:o[15]||(o[15]=function(t){return w.controlBtnMouseDown(t,"leftUp")}),class:"leftUp controlBtn"},null,32)):s("",!0),!0===e.sizeChange?(n(),a("div",{key:1,"data-name":"leftDown",onMousedown:o[16]||(o[16]=function(t){return w.controlBtnMouseDown(t,"leftDown")}),class:"leftDown controlBtn"},null,32)):s("",!0),!0===e.sizeChange?(n(),a("div",{key:2,"data-name":"rightUp",onMousedown:o[17]||(o[17]=function(t){return w.controlBtnMouseDown(t,"rightUp")}),class:"rightUp controlBtn"},null,32)):s("",!0),!0===e.sizeChange?(n(),a("div",{key:3,"data-name":"rightDown",onMousedown:o[18]||(o[18]=function(t){return w.controlBtnMouseDown(t,"rightDown")}),class:"rightDown controlBtn"},null,32)):s("",!0),!0===e.sizeChange&&!e.rate&&r.toolBox.width>20?(n(),a("div",{key:4,"data-name":"topCenter",onMousedown:o[19]||(o[19]=function(t){return w.controlBtnMouseDown(t,"topCenter")}),class:"topCenter controlBtn"},null,32)):s("",!0),!0===e.sizeChange&&!e.rate&&r.toolBox.width>20?(n(),a("div",{key:5,"data-name":"downCenter",onMousedown:o[20]||(o[20]=function(t){return w.controlBtnMouseDown(t,"downCenter")}),class:"downCenter controlBtn"},null,32)):s("",!0),!0===e.sizeChange&&!e.rate&&r.toolBox.height>20?(n(),a("div",{key:6,"data-name":"leftCenter",onMousedown:o[21]||(o[21]=function(t){return w.controlBtnMouseDown(t,"leftCenter")}),class:"leftCenter controlBtn"},null,32)):s("",!0),!0===e.sizeChange&&!e.rate&&r.toolBox.height>20?(n(),a("div",{key:7,"data-name":"rightCenter",onMousedown:o[22]||(o[22]=function(t){return w.controlBtnMouseDown(t,"rightCenter")}),class:"rightCenter controlBtn"},null,32)):s("",!0)]),o[49]||(o[49]=u("div",{class:"toolBoxControlLine toolBoxControlLineItem-1"},null,-1)),o[50]||(o[50]=u("div",{class:"toolBoxControlLine toolBoxControlLineItem-2"},null,-1)),o[51]||(o[51]=u("div",{class:"toolBoxControlLine toolBoxControlLineItem-3"},null,-1)),o[52]||(o[52]=u("div",{class:"toolBoxControlLine toolBoxControlLineItem-4"},null,-1))])],36),[[f,null!=r.drawImg.img]]),u("div",S,[e.DoNotDisplayCopyright?s("",!0):(n(),a("a",$," vue-img-cutter "+h(r.version),1))]),u("canvas",{class:"canvasSelectBox",ref:"canvasSelectBox",width:e.boxWidth,onMousedown:o[27]||(o[27]=function(){return w.dropImgOn&&w.dropImgOn.apply(w,arguments)}),onMouseup:o[28]||(o[28]=function(){return w.dropImgOff&&w.dropImgOff.apply(w,arguments)}),onMousemove:o[29]||(o[29]=function(){return w.dropImgMove&&w.dropImgMove.apply(w,arguments)}),height:e.boxHeight},null,40,q),u("canvas",{class:"canvas",ref:"canvas",width:e.boxWidth,height:e.boxHeight},null,8,N)],36)]),u("div",F,[u("input",{onChange:o[33]||(o[33]=function(){return w.putImgToCanv&&w.putImgToCanv.apply(w,arguments)}),ref:"inputFile",type:"file",accept:e.accept,style:{width:"1px",height:"1px",border:"none",opacity:"0"}},null,40,W),u("span",{onClick:o[34]||(o[34]=function(){return w.chooseImg&&w.chooseImg.apply(w,arguments)})},[l(t.$slots,"choose",{},(function(){return[!0===e.showChooseBtn?(n(),a("div",H,h(e.label),1)):s("",!0)]}),!0)]),u("div",U,[u("span",{onClick:o[35]||(o[35]=function(){return w.handleClose&&w.handleClose.apply(w,arguments)})},[l(t.$slots,"cancel",{},(function(){return[o[53]||(o[53]=u("button",{type:"button",class:"btn btn-default"},"取消",-1))]}),!0)]),u("span",{onClick:o[36]||(o[36]=function(t){return w.cropPicture(!1)})},[l(t.$slots,"confirm",{},(function(){return[u("button",{type:"button",class:"btn btn-primary",style:{"margin-left":"15px"},disabled:!r.drawImg.img}," 确定 ",8,R)]}),!0)])])])],6)]})),_:3}),o[54]||(o[54]=u("div",{style:{clear:"both"}},null,-1))],2)):s("",!0)],2)):s("",!0)]})),_:3})])}],["__scopeId","data-v-0312735b"]]);var A={class:"sl-layout-content"},E={class:"img-cut-content"};t("default",v(w({__name:"index",setup:function(t){var o={cutDown:function(t){var o=new Image;o.src=t.dataURL,y(o,"裁剪")}}.cutDown;return function(t,e){var i=r;return n(),a("div",A,[d(i,null,{title:c((function(){return e[0]||(e[0]=[u("p",null,"图片裁剪",-1)])})),default:c((function(){return[u("div",E,[d(B(j),{ref:"imgCutterModal",label:"选择本地图片","file-type":"png","tool-bgc":"none","is-modal":!1,"show-choose-btn":!0,"lock-scroll":!0,"box-width":783,"box-height":458,"cut-width":250,"cut-height":250,"size-change":!0,"move-able":!0,"img-move":!0,"original-graph":!1,"small-to-upload":!0,"save-cut-position":!0,"scale-able":!0,"preview-mode":!0,quality:1,"tool-box-overflow":!0,onCutDown:B(o)},{default:c((function(){return e[1]||(e[1]=[u("div",{class:"btn btn-primary"},"选择本地图片",-1)])})),_:1},8,["onCutDown"])])]})),_:1})])}}}),[["__scopeId","data-v-ac78da1b"]]))}}}))}();
